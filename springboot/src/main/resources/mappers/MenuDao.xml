<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 命名空间 -->
<mapper namespace="com.example.lrb.dao.MenuDao">
	<!-- 用户登录  -->
	<select id="getMenusByRoleId" parameterType="Integer" resultMap="menusResult">
		SELECT *
		FROM menu 
		WHERE parent_id = 0 
		AND id IN 
		(SELECT menu_id 
		FROM authority 
		WHERE role_id = #{role_id} order by seq )
	</select>
	
	<select id="getItemMenuByParentId" resultType="com.example.lrb.pojo.Menu" >
		select * from menu 
		where parent_id = #{id} 
	</select>
	
	<resultMap type="com.example.lrb.pojo.Menu" id="menusResult">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="icon" column="icon" />
		
		<collection property="children" column="id" select="getItemMenuByParentId" />
	</resultMap>	
	
</mapper>